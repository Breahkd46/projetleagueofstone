(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},110:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(22),r=a.n(c),l=(a(75),a(3)),i=a(4),o=a(6),u=a(5),d=a(7),h=a(9),m=a(28),p=a(69),k=a(156),b=a(154),v=a(155),g=a(157),f=a(1),E=a(153),y=a(8),O=a.n(y);var j="http://ling.westeurope.cloudapp.azure.com",C=(a(27),a(18),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",error:""},a.handleChangeEmail=a.handleChangeEmail.bind(Object(f.a)(Object(f.a)(a))),a.handleChangePassword=a.handleChangePassword.bind(Object(f.a)(Object(f.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),O.a.get(j+"/users/connect?email="+this.state.email+"&password="+this.state.password).then(function(e){"ok"===e.data.status?(console.log(e.data.data),t.props.setTokenSession(e.data.data.token,e.data.data.id,e.data.data.email,e.data.data.name),t.props.history.push("/projetleagueofstone/")):"error"===e.data.status&&t.setState({error:e.data.message})})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{className:"base"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("h1",null,"Connectez-vous :"),s.a.createElement("div",{className:"cadre"},s.a.createElement("label",null,"Login :"," ",s.a.createElement("input",{type:"text",value:this.state.email,onChange:this.handleChangeEmail}))),s.a.createElement("div",{className:"cadre"},s.a.createElement("label",null,"Mot de passe :"," ",s.a.createElement("input",{type:"password",value:this.state.password,onChange:this.handleChangePassword}))),s.a.createElement("div",null,s.a.createElement("p",null,this.state.error)),s.a.createElement("div",{id:"bouton"},s.a.createElement("input",{type:"submit",value:"Se connecter"}))),s.a.createElement("div",null,"Vous n\u2019avez pas de compte ? Cr\xe9ez votre compte en quelques secondes ",s.a.createElement(E.a,{to:"/signup"},"en cliquant ici !")))}}]),t}(n.Component)),N=Object(h.b)(function(e){return{sessionToken:e.sessionReducer}},function(e){return{setTokenSession:function(t,a,n,s){e(function(e,t,a,n){return{type:"SET_TOKEN_SESSION",token:e,id:t,email:a,name:n}}(t,a,n,s))}}})(C),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={login:"",email:"",password:"",confirmPassword:"",error:""},a.handleChangeLogin=a.handleChangeLogin.bind(Object(f.a)(Object(f.a)(a))),a.handleChangeEmail=a.handleChangeEmail.bind(Object(f.a)(Object(f.a)(a))),a.handleChangePassword=a.handleChangePassword.bind(Object(f.a)(Object(f.a)(a))),a.handleChangeConfirmPassword=a.handleChangeConfirmPassword.bind(Object(f.a)(Object(f.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleChangeLogin",value:function(e){this.setState({login:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleChangeConfirmPassword",value:function(e){this.setState({confirmPassword:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.email,s=a.password;if(s===a.confirmPassword){var c=j+"/users/subscribe?email="+n+"&password="+s+"&name="+this.state.login;O.a.get(c).then(function(e){var a=e.data;"ok"===a.status?t.props.history.push("/projetleagueofstone/"):t.setState({error:"Une erreur s'est produite : "+a.message})})}else this.setState({error:"Les deux mots de passe ne correspondent pas"})}},{key:"render",value:function(){return s.a.createElement("div",{class:"base"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",null,this.state.error),s.a.createElement("h1",null,"Inscrivez-vous :"),s.a.createElement("div",{class:"cadre"},s.a.createElement("label",null,"Pseudo :"," ",s.a.createElement("input",{type:"text",value:this.state.login,onChange:this.handleChangeLogin}))),s.a.createElement("div",{class:"cadre"},s.a.createElement("label",null,"Email :"," ",s.a.createElement("input",{type:"text",value:this.state.email,onChange:this.handleChangeEmail}))),s.a.createElement("div",{class:"cadre"},s.a.createElement("label",null,"Mot de passe :"," ",s.a.createElement("input",{type:"password",value:this.state.password,onChange:this.handleChangePassword}))),s.a.createElement("div",{class:"cadre"},s.a.createElement("label",null,"Confirmation du mot de passe :"," ",s.a.createElement("input",{type:"password",value:this.state.confirmPassword,onChange:this.handleChangeConfirmPassword}))),s.a.createElement("div",{id:"bouton"},s.a.createElement("input",{type:"submit",value:"S'inscrire"}))),s.a.createElement("div",null,"Vous avez d\xe9j\xe0 un compte ? ",s.a.createElement(E.a,{to:"/signin"},"Connectez-vous ici !")))}}]),t}(n.Component);function T(e){return{type:"SET_MATCHMAKING",match:e}}var M=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(){var e=this;O.a.get(j+"/matchmaking/participate?token="+this.props.sessionToken.token).then(function(t){if("ok"===t.data.status){var a=t.data.data.request?t.data.data.request:[];console.log(a),e.props.initMatchmaking(t.data.data.matchmakingId,a),t.data.data.match&&(console.log(t.data.data),e.props.setMatchmaking(t.data.data.match))}else console.log(t.data.message)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"base"},s.a.createElement("div",{id:"bouton"},s.a.createElement("input",{type:"button",value:"Participer",onClick:this.handleClick})))}}]),t}(n.Component),w=Object(h.b)(function(e){return{sessionToken:e.sessionReducer}},function(e){return{initMatchmaking:function(t,a){e(function(e,t){return{type:"INIT_MATCHMAKING",id:e,request:t}}(t,a))},setMatchmaking:function(t){e(T(t))}}})(M);function D(e){return{type:"REMOVE_MATCHMAKING",id:e}}var A=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleClick",value:function(){var e=this;O.a.get(j+"/matchmaking/unparticipate?token="+this.props.sessionToken.token).then(function(t){"ok"===t.data.status?(console.log(t.data.data),e.props.removeMatchmaking("")):console.log(t.data.message)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"base"},s.a.createElement("div",{id:"bouton"},s.a.createElement("input",{type:"button",value:"Annuler",onClick:this.handleClick})))}}]),t}(n.Component),P=Object(h.b)(function(e){return{sessionToken:e.sessionReducer}},function(e){return{removeMatchmaking:function(t){e(D(t))}}})(A),I=a(31),R=(a(102),a(51),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={players:[],playerRequest:[],errorMessage:""},a.handleMatchRequest=a.handleMatchRequest.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalID=setInterval(function(){return e.reloadRequests()},5e3),this.reloadRequests()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"reloadRequests",value:function(){var e=this;O.a.get(j+"/matchmaking/getAll?token="+this.props.sessionToken.token).then(function(t){"ok"===t.data.status?(console.log(t.data.data),e.setState({players:t.data.data})):console.log(t.data.message)})}},{key:"handleMatchRequest",value:function(e){var t=this;console.log("Envoi de requete pour ",e.target.value);var a=e.target.value;this.state.playerRequest.includes(a)?this.setState({errorMessage:"Vous avez deja fait une requete a ce joueur"}):(O.a.get(j+"/matchmaking/request?token="+this.props.sessionToken.token+"&matchmakingId="+e.target.value).then(function(e){"ok"===e.data.status?(console.log(e.data.data),t.setState(function(e){return{playerRequest:[].concat(Object(I.a)(e.playerRequest),[a])}})):(console.log(e.data.message),t.setState({errorMessage:"La requete n'a pas fonctionn\xe9"}))}),this.setState({errorMessage:""}))}},{key:"render",value:function(){var e=this;console.log("reload"),console.log(this.state.errorMessage);var t=s.a.createElement("div",null,s.a.createElement("p",null,this.state.errorMessage));return s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("caption",null,s.a.createElement("h1",null,"Tableau des joueurs en attente")),s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Request"))),s.a.createElement("tbody",null,this.state.players.map(function(t,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,t.name),s.a.createElement("td",null,s.a.createElement("button",{value:t.matchmakingId,onClick:e.handleMatchRequest}," Request ")))}))),t)}}]),t}(n.Component)),q=Object(h.b)(function(e){return{matchmaking:e.matchmakingReducer,sessionToken:e.sessionReducer}},null)(R);function _(e){return{type:"UPDATE_MATCHMAKING_REQUEST",request:e}}function x(e,t,a){return{type:"UPDATE_MATCH",status:e,player1:t,player2:a}}var J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleAcceptRequest=a.handleAcceptRequest.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleAcceptRequest",value:function(e){O.a.get(j+"/matchmaking/acceptRequest?token="+this.props.sessionToken.token+"&matchmakingId="+e.target.value).then(function(e){"ok"===e.data.status?console.log(e.data.data):console.log(e.data.message)})}},{key:"render",value:function(){var e=this;return console.log(this.props.matchmaking.request),s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement("caption",null,s.a.createElement("h1",null,"Tableau de requetes")),s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Name"),s.a.createElement("th",null,"Accepter"))),s.a.createElement("tbody",null,this.props.matchmaking.request.map(function(t,a){return s.a.createElement("tr",{key:a},s.a.createElement("td",null,t.name),s.a.createElement("td",null,s.a.createElement("button",{value:t.matchmakingId,onClick:e.handleAcceptRequest}," Accepter ")))}))))}}]),t}(n.Component),L=Object(h.b)(function(e){return{matchmaking:e.matchmakingReducer,sessionToken:e.sessionReducer}},function(e){return{updateMatchmakingRequest:function(t){e(_(t))},setMatch:function(t,a){e(x(t,a))}}})(J),G=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalID=setInterval(function(){return e.reloadParticipate()},5e3),this.reloadParticipate()}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"reloadParticipate",value:function(){var e=this;""!==this.props.matchmaking.matchmakingId&&O.a.get(j+"/matchmaking/participate?token="+this.props.sessionToken.token).then(function(t){"ok"===t.data.status?(console.log(t.data.data.request),console.log(e.props.matchmaking.request),console.log(t.data.data.request!==e.props.matchmaking.request),t.data.data.request!==e.props.matchmaking.request&&e.props.updateMatchmakingRequest(t.data.data.request),t.data.data.match&&(console.log(t.data.data),e.props.setMatchmaking(t.data.data.match))):console.log(t.data.message)})}},{key:"render",value:function(){return""===this.props.matchmaking.matchmakingId?s.a.createElement(w,null):this.props.matchmaking.match?s.a.createElement("div",null,s.a.createElement("p",null,"Vous avez deja un match en cours...")):s.a.createElement("div",null,s.a.createElement("div",{className:"base"},s.a.createElement("div",null,s.a.createElement(q,null)),s.a.createElement("div",null,s.a.createElement(L,{requests:this.props.matchmaking.request}))),s.a.createElement(P,null))}}]),t}(n.Component),H=Object(h.b)(function(e){return{matchmaking:e.matchmakingReducer,sessionToken:e.sessionReducer}},function(e){return{updateMatchmakingRequest:function(t){e(_(t))},setMatchmaking:function(t){e(T(t))}}})(G),U=(a(24),a(52),a(29),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"flip",onClick:this.props.onClick},s.a.createElement("div",{className:"card flip"},s.a.createElement("div",{className:"face front"},s.a.createElement("img",{className:"",alt:"".concat(this.props.name," card"),src:"https://ddragon.leagueoflegends.com/cdn/img/champion/splash/".concat(this.props.img,"_0.jpg")}),s.a.createElement("div",{className:"card-text"},s.a.createElement("div",{className:"card-text-item-left"},s.a.createElement("img",{src:"swords.png"}),s.a.createElement("p",null,this.props.info.attackdamage)),s.a.createElement("div",{className:"card-text-title"},s.a.createElement("p",null,this.props.name)),s.a.createElement("div",{className:"card-text-item-right"},s.a.createElement("img",{src:"security-badge.png"}),s.a.createElement("p",null,this.props.info.armor))))))}}]),t}(n.Component)),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={cards:[],deck:[],status:"",nbCards:0},a.handleClickToDeck=a.handleClickToDeck.bind(Object(f.a)(Object(f.a)(a))),a.handleClickToCards=a.handleClickToCards.bind(Object(f.a)(Object(f.a)(a))),a.handleClickCreateDeck=a.handleClickCreateDeck.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.a.get(j+"/cards/getAll?token="+this.props.sessionToken.token).then(function(t){"ok"===t.data.status?(console.log(t.data.data),e.setState({status:"loaded",cards:t.data.data})):console.log(t.data.message)})}},{key:"handleClickToDeck",value:function(e){if(this.state.nbCards<20){var t=this.state.cards[e];this.setState(function(a){return{deck:[].concat(Object(I.a)(a.deck),[t]),cards:a.cards.filter(function(t,a){return a!==e}),nbCards:a.nbCards+1}})}}},{key:"handleClickToCards",value:function(e){var t=this.state.deck[e];this.setState(function(a){return{cards:[].concat(Object(I.a)(a.cards),[t]),deck:a.deck.filter(function(t,a){return a!==e}),nbCards:a.nbCards-1}})}},{key:"handleClickCreateDeck",value:function(){var e=this;if(20===this.state.nbCards){var t=[],a=!0,n=!1,s=void 0;try{for(var c,r=this.state.deck[Symbol.iterator]();!(a=(c=r.next()).done);a=!0){var l=c.value;console.log(l),t.push({key:l.key})}}catch(o){n=!0,s=o}finally{try{a||null==r.return||r.return()}finally{if(n)throw s}}console.log(t),console.log(JSON.stringify(t));var i=encodeURI(JSON.stringify(t));console.log(i),O.a.get(j+"/match/initDeck?token="+this.props.sessionToken.token+"&deck="+i).then(function(t){"ok"===t.data.status?(console.log(t.data.data),e.setState({status:"requestSent"}),e.props.handleDeckInit()):console.log(t.data.message)})}}},{key:"render",value:function(){var e=this;return"loaded"===this.state.status?s.a.createElement("div",{className:""},s.a.createElement("div",null,s.a.createElement("ul",{className:"menu"},s.a.createElement("li",null,s.a.createElement("h1",null,"Contruisez votre deck")))),s.a.createElement("button",{className:"button",onClick:this.handleClickCreateDeck},"Creer le deck"),s.a.createElement("div",{className:"MakeDeck containerMakeDeck"},s.a.createElement("div",{className:"cadre TabCardsToAdd containerList"},s.a.createElement("p",{className:"titreList"},"Collection de cartes"),s.a.createElement("div",{className:"containerMakeDeck"},this.state.cards.map(function(t,a){return s.a.createElement(U,{className:"item",key:a,name:t.name,img:t.key,info:t.stats,onClick:function(){return e.handleClickToDeck(a)}})}))),s.a.createElement("div",{className:"cadre TabCardsToAdd containerList"},s.a.createElement("p",{className:"titreList"},"Mon deck"),s.a.createElement("div",{className:"containerMakeDeck"},console.log(this.state.deck),this.state.deck.map(function(t,a){return s.a.createElement(U,{className:"item",key:a,name:t.name,img:t.key,info:t.stats,onClick:function(){return e.handleClickToCards(a)}})}))))):"requestSent"===this.state.status?s.a.createElement("div",null,s.a.createElement("p",null,"En attente du joueur adverse...")):s.a.createElement("div",null,s.a.createElement("p",null,"Chargement..."))}}]),t}(n.Component),V=Object(h.b)(function(e){return{match:e.matchReducer,sessionToken:e.sessionReducer}},function(e){return{setMatch:function(t){e(x(t))}}})(K),z=a(16),F=a(26),W=a.n(F),B=a(34),X=a(35),Q=a.n(X),$=a(68),Y=a.n($);a(110);var Z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={time:0},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"time",value:function(){this.setState(function(e){return{time:e.time+1}})}},{key:"componentDidMount",value:function(){var e=this;this.intervalID=setInterval(function(){return e.time()},1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e="".concat(Math.floor(this.state.time/60),":").concat(this.state.time%60);return s.a.createElement("div",{className:"chrono"},s.a.createElement("div",{id:"Crono"},e))}}]),t}(n.Component),ee=(a(53),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="id"+this.props.lvl,t="https://ddragon.leagueoflegends.com/cdn/img/champion/splash/"+this.props.img+"_0.jpg";return s.a.createElement("div",{className:"face front"},s.a.createElement("div",{className:e,onClick:this.props.click},s.a.createElement("div",{className:"main",style:{backgroundImage:"url("+t+")"}},s.a.createElement("div",{className:"card-text"},s.a.createElement("div",{className:"card-text-title"},s.a.createElement("p",null,this.props.name)),s.a.createElement("div",{className:"card-text-item-left"},s.a.createElement("img",{src:"swords.png"}),s.a.createElement("p",null,"A : ",this.props.attack)),s.a.createElement("div",{className:"card-text-item-right"},s.a.createElement("img",{src:"security-badge.png"}),s.a.createElement("p",null,"D : ",this.props.def))))))}}]),t}(n.Component)),te=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="id"+this.props.lvl,t="https://ddragon.leagueoflegends.com/cdn/img/champion/splash/"+this.props.img+"_0.jpg";return s.a.createElement("div",{className:"face front"},s.a.createElement("div",{className:e,onClick:this.props.click},s.a.createElement("div",{className:"visibleAdverse",style:{backgroundImage:"url("+t+")"}},s.a.createElement("div",{className:"card-text"},s.a.createElement("div",{className:"card-text-title"},s.a.createElement("p",null,this.props.name)),s.a.createElement("div",{className:"card-text-item-left"},s.a.createElement("img",{src:"swords.png"}),s.a.createElement("p",null,"A : ",this.props.attack)),s.a.createElement("div",{className:"card-text-item-right"},s.a.createElement("img",{src:"security-badge.png"}),s.a.createElement("p",null,"D : ",this.props.def))))))}}]),t}(n.Component),ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={selectedCard:""},a.handleClickCard=a.handleClickCard.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleClickCard",value:function(e){this.setState({selectedCard:e}),console.log(e),this.props.handleCard(e)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.props.board.map(function(t,a){return s.a.createElement(te,{key:a,className:e.state.selectedCard===t.key?"selectedCard":"",lvl:a+1,name:t.key,img:t.key,attack:t.stats.attackdamage,def:t.stats.armor,click:function(){return e.handleClickCard(t.key)}})}))}}]),t}(n.Component),ne=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("img",{src:"dos-carte.png"}),"Carte face cach\xe9e")}}]),t}(n.Component),se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).createHandsCardsJ2=function(){for(var e=[],t=0;t<a.props.handPlayer;t++)e.push(s.a.createElement(ne,{key:t}));return e},a.state={hand:[],cardPlayed:"",nbClick:0},a.handleClickCard=a.handleClickCard.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleClickCard",value:function(e){O.a.get(j+"/match/playCard?token="+this.props.sessionToken.token+"&card="+e).then(function(e){"ok"===e.data.status?console.log(e.data.data):console.log(e.data.message)}),this.props.handlePlayCard()}},{key:"render",value:function(){var e=this;return this.props.handPlayer instanceof Array?s.a.createElement("div",{className:"hand"},this.props.handPlayer.map(function(t,a){return s.a.createElement(ee,{key:a,lvl:a+1,name:t.name,img:t.key,attack:t.stats.attackdamage,def:t.stats.armor,click:function(){return e.handleClickCard(t.key)}})})):s.a.createElement("div",{className:"handsCardsJ2"},this.createHandsCardsJ2())}}]),t}(n.Component),ce=Object(h.b)(function(e){return{match:e.matchReducer,sessionToken:e.sessionReducer}},null)(se),re=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"hero"},s.a.createElement("div",{className:"col",onClick:function(){return e.props.handleAttackDest("hero")}},s.a.createElement("p",{className:"pJoueurA"},"Joueur ",this.props.player.name),s.a.createElement("p",null,"JA : ",this.props.player.hp)),s.a.createElement("div",{className:"col1"},s.a.createElement("p",{className:"pDeck"},console.log(this.props.player.deck),this.props.player.deck))),s.a.createElement("div",{className:"hand"},s.a.createElement(ce,{handPlayer:this.props.player.hand,handlePlayCard:null})),s.a.createElement("div",{className:"visible"},s.a.createElement(ae,{board:this.props.player.board,handleCard:this.props.handleAttackDest})))}}]),t}(n.Component),le=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="id"+this.props.lvl,t="https://ddragon.leagueoflegends.com/cdn/img/champion/splash/"+this.props.img+"_0.jpg";return s.a.createElement("div",{className:"face front"},s.a.createElement("div",{className:e,onClick:this.props.click},s.a.createElement("div",{className:"visiblePrincipal",style:{backgroundImage:"url("+t+")"}},s.a.createElement("div",{className:"card-text"},s.a.createElement("div",{className:"card-text-title"},s.a.createElement("p",null,this.props.name)),s.a.createElement("div",{className:"card-text-item-left"},s.a.createElement("img",{src:"swords.png"}),s.a.createElement("p",null,"A : ",this.props.attack)),s.a.createElement("div",{className:"card-text-item-right"},s.a.createElement("img",{src:"security-badge.png"}),s.a.createElement("p",null,"D : ",this.props.def))))))}}]),t}(n.Component),ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={selectedCard:""},a.handleClickCard=a.handleClickCard.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleClickCard",value:function(e){this.setState({selectedCard:e}),console.log(e),this.props.handleCard(e)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.props.board.map(function(t,a){return s.a.createElement(le,{key:a,className:e.state.selectedCard===t.key?"selectedCard":"",lvl:a+1,name:t.key,img:t.key,attack:t.stats.attackdamage,def:t.stats.armor,click:function(){return e.handleClickCard(t.key)}})}))}}]),t}(n.Component),oe=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.props.handleAttackSource),s.a.createElement("div",null,s.a.createElement("div",{className:"fin"},s.a.createElement("button",{disabled:!this.props.player.turn,onClick:this.props.handleEndTurn},"Fin du tour")),s.a.createElement("div",{className:"boardPrincipal"},s.a.createElement(ie,{board:this.props.player.board,handleCard:this.props.handleAttackSource})),s.a.createElement("div",null,s.a.createElement("div",{className:"col2"},s.a.createElement("p",{className:"pJoueurP"},"Joueur ",this.props.player.name),s.a.createElement("p",{className:"pv"},"JP : ",this.props.player.hp)),s.a.createElement("div",null,s.a.createElement("button",{className:"col3 pDeck",disabled:!this.props.player.turn||this.props.player.turn&&this.props.player.cardPicked,onClick:this.props.handlePickCard}," ",this.props.player.deck))),s.a.createElement("div",null,s.a.createElement(ce,{handPlayer:this.props.player.hand,handlePlayCard:this.props.handlePlayCard})))}}]),t}(n.Component);var ue=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={statusGame:"",J1isJ1:!0,player1:"",player2:"",attackSrc:"",attackDest:""},a.handleEndTurn=a.handleEndTurn.bind(Object(f.a)(Object(f.a)(a))),a.handlePickCard=a.handlePickCard.bind(Object(f.a)(Object(f.a)(a))),a.handlePlayCard=a.handlePlayCard.bind(Object(f.a)(Object(f.a)(a))),a.handleAttackDest=a.handleAttackDest.bind(Object(f.a)(Object(f.a)(a))),a.handleAttackSource=a.handleAttackSource.bind(Object(f.a)(Object(f.a)(a))),a.handleFinishGame=a.handleFinishGame.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=Object(B.a)(W.a.mark(function e(){var t=this;return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.intervalID=setInterval(function(){return t.reloadMatch()},5e3),e.next=3,this.loadMatch();case 3:this.heroHPControler(this.state.player1,this.state.player2);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"reloadMatch",value:function(){console.log(this.state.player2.turn),this.state.player2.turn&&this.loadMatch()}},{key:"loadMatch",value:function(){var e=this;O.a.get(j+"/match/getMatch?token="+this.props.sessionToken.token).then(function(t){"ok"===t.data.status?(console.log(t.data.data.player1),e.props.sessionToken.id===t.data.data.player1.id?e.setState({J1isJ1:!0,statusGame:t.data.data.status,player1:t.data.data.player1,player2:t.data.data.player2}):e.setState({J1isJ1:!1,statusGame:t.data.data.status,player1:t.data.data.player2,player2:t.data.data.player1})):console.log(t.data.message)})}},{key:"handlePickCard",value:function(){O.a.get(j+"/match/pickCard?token="+this.props.sessionToken.token).then(function(e){"ok"===e.data.status?console.log(e.data.data):console.log(e.data.message)}),this.loadMatch()}},{key:"handleEndTurn",value:function(){O.a.get(j+"/match/endTurn?token="+this.props.sessionToken.token).then(function(e){"ok"===e.data.status?console.log(e.data.data):console.log(e.data.message)}),this.loadMatch()}},{key:"handlePlayCard",value:function(){this.loadMatch()}},{key:"heroHPControler",value:function(e,t){return(e.hp<0||t.hp<0)&&(this.loadMatch(),!0)}},{key:"handleFinishGame",value:function(){var e=this;O.a.get(j+"/match/finishMatch?token="+this.props.sessionToken.token).then(function(t){"ok"===t.data.status?(console.log(t.data.data),e.props.removeMatch(""),e.props.removeMatchmaking("")):(console.log(t.data.message),"There is no match associated"===t.data.message&&(e.props.removeMatch(""),e.props.removeMatchmaking("")))})}},{key:"changeStateAfterAttack",value:function(e,t){var a=this.state.J1isJ1?e:t,n=this.state.J1isJ1?t:e;this.setState(function(e){return{player1:Object(z.a)({},e.player1,{board:a.board,hp:a.hp}),player2:Object(z.a)({},e.player2,{board:n.board,hp:n.hp})}}),this.heroHPControler(a,n)&&this.loadMatch()}},{key:"attack",value:function(){var e=this;console.log(this.state.attackSrc),console.log(this.state.attackDest),""!==this.state.attackSrc&&""!==this.state.attackDest&&("hero"===this.state.attackDest?O.a.get(j+"/match/attackPlayer?token="+this.props.sessionToken.token+"&card="+this.state.attackSrc).then(function(t){"ok"===t.data.status?(console.log(t.data.data),e.changeStateAfterAttack(t.data.data.player1,t.data.data.player2)):console.log(t.data.message)}):O.a.get(j+"/match/attack?token="+this.props.sessionToken.token+"&card="+this.state.attackSrc+"&ennemyCard="+this.state.attackDest).then(function(t){"ok"===t.data.status?(console.log(t.data.data),e.changeStateAfterAttack(t.data.data.player1,t.data.data.player2)):console.log(t.data.message)}))}},{key:"handleAttackSource",value:function(){var e=Object(B.a)(W.a.mark(function e(t){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,this.setState({attackSrc:t});case 3:this.attack();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAttackDest",value:function(){var e=Object(B.a)(W.a.mark(function e(t){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,this.setState({attackDest:t});case 3:this.attack();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return""===this.state.player1?s.a.createElement("p",null,"Chargement..."):s.a.createElement("div",{className:"plateau"},s.a.createElement("div",{className:"center"},s.a.createElement("div",{className:"adversaire"},s.a.createElement(re,{player:this.state.player2,handleAttackDest:this.handleAttackDest})),s.a.createElement("div",{className:"encadre"},s.a.createElement("div",{className:"principal"},s.a.createElement(oe,{handlePickCard:this.handlePickCard,handleEndTurn:this.handleEndTurn,handlePlayCard:this.handlePlayCard,handleAttackSource:this.handleAttackSource,player:this.state.player1}))),s.a.createElement("div",{className:"bouton"},s.a.createElement("div",{className:"timer"},s.a.createElement(Z,null)))),s.a.createElement(Q.a,{show:"Player 1 won"===this.state.statusGame||"Player 2 won"===this.state.statusGame,onHide:this.handleFinishGame},s.a.createElement(Q.a.Body,null," ","1"===this.state.statusGame.substring(7,8)?this.state.J1isJ1?this.state.player1.name:this.state.player2.name:this.state.J1isJ1?this.state.player2.name:this.state.player1.name," a gagn\xe9 "),s.a.createElement(Q.a.Footer,null,s.a.createElement(Y.a,{variant:"secondary",onClick:this.handleFinishGame},"Retour a la page d'accueil"))))}}]),t}(n.Component),de=Object(h.b)(function(e){return{match:e.matchReducer,sessionToken:e.sessionReducer}},function(e){return{removeMatch:function(t,a,n){e({type:"REMOVE_MATCH",id:t})},removeMatchmaking:function(t){e(D(t))}}})(ue),he=function(e){function t(e){var a;return Object(l.a)(this,t),""===(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).props.match.status||"Deck is pending"===a.props.match.status?a.setState({isDeck:!0}):a.state={isDeck:!1},a.handleDeckInit=a.handleDeckInit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalID=setInterval(function(){return e.reloadMatch()},5e3),this.loadMatch(),""!==this.props.match.status&&"Deck is pending"!==this.props.match.status||this.setState({isDeck:!0})}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"loadMatch",value:function(){var e=this;O.a.get(j+"/match/getMatch?token="+this.props.sessionToken.token).then(function(t){"ok"===t.data.status?(console.log(t.data.data),e.props.updateMatch(t.data.data.status,t.data.data.player1,t.data.data.player2)):console.log(t.data.message)})}},{key:"reloadMatch",value:function(){this.state.isDeck&&"Deck is pending"===this.props.match.status&&this.loadMatch()}},{key:"handleDeckInit",value:function(){this.setState({isDeck:!0})}},{key:"render",value:function(){return console.log(this.props.match.status),""===this.props.match.status?s.a.createElement("div",{className:"base"},s.a.createElement("h1",null,"Loading...")):"Deck is pending"===this.props.match.status?s.a.createElement("div",null,s.a.createElement(V,{handleDeckInit:this.handleDeckInit})):(console.log(this.props.sessionToken.id),console.log(this.props.matchmaking.match.player2),console.log(this.props.match.player1.hand),s.a.createElement("div",null,s.a.createElement(de,null)))}}]),t}(n.Component),me=Object(h.b)(function(e){return{match:e.matchReducer,matchmaking:e.matchmakingReducer,sessionToken:e.sessionReducer}},function(e){return{updateMatch:function(t,a,n){e(x(t,a,n))}}})(he);var pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:""},a.handleChangeEmail=a.handleChangeEmail.bind(Object(f.a)(Object(f.a)(a))),a.handleChangePassword=a.handleChangePassword.bind(Object(f.a)(Object(f.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleSubmit",value:function(){var e=this;O.a.get(j+"/users/unsubscribe?email="+this.state.email+"&password="+this.state.password+"&token="+this.props.sessionToken.token).then(function(t){"ok"===t.data.status?(console.log(t.data),e.props.removeTokenSession("")):console.log(t.message)})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("h1",null,"Supprimer son compte :"),s.a.createElement("div",{className:"cadre"},s.a.createElement("label",null,"Login :"," ",s.a.createElement("input",{type:"text",value:this.state.email,onChange:this.handleChangeEmail}))),s.a.createElement("div",{className:"cadre"},s.a.createElement("label",null,"Mot de passe :"," ",s.a.createElement("input",{type:"password",value:this.state.password,onChange:this.handleChangePassword}))),s.a.createElement("div",null,s.a.createElement("input",{type:"submit",value:"Supprimer"}))))}}]),t}(n.Component),ke=Object(h.b)(function(e){return{sessionToken:e.sessionReducer}},function(e){return{removeTokenSession:function(t){e(function(e){return{type:"REMOVE_TOKEN_SESSION",token:e}}(t))}}})(pe),be=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"base"},s.a.createElement("p",null,"Nom : ",this.props.sessionToken.name),s.a.createElement("p",null,"Email : ",this.props.sessionToken.email)),s.a.createElement("div",{className:"base"},s.a.createElement(ke,null)))}}]),t}(n.Component),ve=Object(h.b)(function(e){return{sessionToken:e.sessionReducer}},null)(be),ge=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={cards:[],isLoaded:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.a.get(j+"/cards/getAll?token=").then(function(t){"ok"===t.data.status?(console.log(t.data.data),e.setState({isLoaded:!0,cards:t.data.data})):console.log(t.data.message)})}},{key:"render",value:function(){return this.state.isLoaded?s.a.createElement("div",null,this.state.cards.map(function(e,t){return s.a.createElement(U,{className:"item",key:t,name:e.name,img:e.key,info:e.stats,onClick:null})})):s.a.createElement("div",null,s.a.createElement("p",null,"Chargement..."))}}]),t}(n.Component),fe=Object(h.b)(function(e){return{sessionToken:e.sessionReducer}},null)(ge),Ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={status:"accueil"},a.handleCompte=a.handleCompte.bind(Object(f.a)(Object(f.a)(a))),a.handleListeCartes=a.handleListeCartes.bind(Object(f.a)(Object(f.a)(a))),a.handleAccueil=a.handleAccueil.bind(Object(f.a)(Object(f.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleCompte",value:function(){this.setState({status:"compte"})}},{key:"handleAccueil",value:function(){this.setState({status:"accueil"})}},{key:"handleListeCartes",value:function(){this.setState({status:"cartes"})}},{key:"render",value:function(){var e=this;if(null!==this.props.matchmaking.match)return s.a.createElement("div",null,s.a.createElement(me,null));return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("ul",{className:"menu"},s.a.createElement("li",null,s.a.createElement("a",{onClick:this.handleAccueil,href:"#Accueil"},"Accueil")),s.a.createElement("li",null,s.a.createElement("a",{onClick:this.handleCompte,href:"#Compte"},"Compte")),s.a.createElement("li",null,s.a.createElement("a",{onClick:this.handleListeCartes,href:"#ListeCartes"},"Liste de cartes")),s.a.createElement("li",null,s.a.createElement("a",{href:"/logout"},"Se d\xe9connecter"))),s.a.createElement("h2",null,"League of Stones"),s.a.createElement("p",null,"Bienvenue")),function(){switch(e.state.status){case"accueil":return s.a.createElement(H,null);case"compte":return s.a.createElement(ve,null);case"cartes":return s.a.createElement(fe,null);default:return s.a.createElement("div",null,s.a.createElement("p",null,"Error"))}}())}}]),t}(n.Component),ye=Object(h.b)(function(e){return{match:e.matchReducer,matchmaking:e.matchmakingReducer}},null)(Ee),Oe=function(e){var t=e.component,a=Object(p.a)(e,["component"]);return s.a.createElement(k.a,Object.assign({path:"/projetleagueofstone/"},a,{render:function(e){return a.isConnected?s.a.createElement(t,Object.assign({},e,a)):s.a.createElement(b.a,{to:"/signin"})}}))},je=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(v.a,null,s.a.createElement(g.a,null,s.a.createElement(k.a,{path:"/projetleagueofstone/signin",component:N}),s.a.createElement(k.a,{path:"/projetleagueofstone/signup",component:S}),s.a.createElement(Oe,{component:ye,isConnected:this.props.sessionToken.isConnected})))}}]),t}(n.Component),Ce=Object(h.b)(function(e){return{sessionToken:e.sessionReducer}},null)(je),Ne={token:"",isConnected:!1};var Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN_SESSION":return Object(z.a)({},e,{token:t.token,id:t.id,name:t.name,email:t.email,isConnected:!0});case"REMOVE_TOKEN_SESSION":return Object(z.a)({},e,{token:"",id:"",name:"",email:"",isConnected:!1});default:return e}},Te={matchmakingId:"",request:[],match:null};var Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_MATCHMAKING":return Object(z.a)({},e,{matchmakingId:t.id,request:t.request});case"UPDATE_MATCHMAKING_REQUEST":return Object(z.a)({},e,{request:t.request});case"REMOVE_MATCHMAKING":return{matchmakingId:"",request:[],match:null};case"SET_MATCHMAKING":return Object(z.a)({},e,{match:t.match});default:return e}},we={status:"",player1:null,player2:null};var De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MATCH":return Object(z.a)({},e,{status:t.status,player1:t.player1,player2:t.player2});case"REMOVE_MATCH":return{status:"",player1:null,player2:null};default:return e}},Ae=Object(m.b)({sessionReducer:Se,matchmakingReducer:Me,matchReducer:De}),Pe=Object(m.c)(Ae,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Ie=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(h.a,{store:Pe},s.a.createElement(Ce,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},18:function(e,t,a){},24:function(e,t,a){},27:function(e,t,a){},29:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},70:function(e,t,a){e.exports=a(152)},75:function(e,t,a){}},[[70,2,1]]]);
//# sourceMappingURL=main.a6d370e5.chunk.js.map